<div class="row mb-4">
  <div class="col-sm-9">
    <h3>Companies</h3>
  </div>
  <div class="col-sm-3 d-none d-sm-block">
    <button ng-if="vm.userCanAdd" class="btn btn-primary mx-0 float-right" ui-sref="orgs.create()" data-automation-id="button-register-a-company"
      title="Register a Company">
      <i class="fas fa-plus"></i> Register a Company
    </button>
  </div>
</div>

<!-- Search field to filter the list... -->
<div class="row my-4">
  <div class="col-sm-9 col-md-6 col-lg-4">
    <div class="input-group">
      <div class="input-group-prepend">
        <span class="input-group-text"><i class="fas fa-search"></i></span>
      </div>
      <input  class="form-control" 
              type="text" 
              name=""
              ng-model="vm.searchTerm"
              placeholder="Search companies..."
              ng-change="vm.filterItems()">
    </div>
  </div>
</div>

<div class="row">
  <div class="col">
    <div class="table-responsive">
      <table class="table table-borderless table-hover company-list">
        <tbody>
          <tr ng-repeat="org in vm.pagedItems" class="hover-area">
            <td class="company-logo">
              <a ng-if="org.website" href="{{org.website}}" target="_blank" title="Visit website"><img class="rounded" width="36" height="36" src="{{ org.orgImageURL }}"></a>
              <img ng-if="!org.website" class="rounded border" width="36" height="36" src="{{ org.orgImageURL }}">
            </td>
            <td class="company-name font-weight-bold text-truncate" data-automation-id="holderCompanyName" id="holderCompanyName">{{ org.name }}</td>
            <td class="member-count"><i class="fas fa-users" title="{{ org.members.length }} members"></i> {{ org.members.length }}</td>
            <td class="swu-status"><i ng-if="vm.hasOrgMetRFQ(org)" title="Sprint With Us Qualified" class="fas fa-certificate"></i></td>
            <!-- <td><i ng-if="org.awardedContractCount > 0" title="Sprint With Us Awardee" class="fas fa-trophy"></i></td> -->
            <td class="button-cell">
              <!--If user is not a member and can join-->
              <button  data-automation-id="btnJoinCompany" ng-if="vm.canJoinOrg(org)" class="btn btn-text-only" ng-click="vm.sendJoinRequest(org)" title="Join {{org.name}}"><i class="fas fa-user-plus"></i> Join</button>
              <!--If membership request is pending-->
              <button ng-if="vm.hasPendingRequest(org)" data-automation-id="pendingLabel" class="btn btn-text-only text-muted" title="Your membership request was sent and is pending approval">
                <i class="fas fa-user-clock"></i>&nbsp;Pending
              </button>
              <!--If user is member-->
              <!--Andrew: Can you add logic to enable the same functionality as the 'Leave' button like in Settings > Company Affiliations?)-->
              <button ng-if="vm.isUserMember(org) && !vm.userIsOrgAdmin(org)" class="btn btn-text-only" title="Withdraw your membership from {{org.name}}"><i class="fas fa-user-minus"></i> Leave</button>
              <button ng-if="vm.userIsOrgAdmin(org) || vm.isAdmin" class="btn btn-text-only" ui-sref="orgs.view({ orgId: org._id })" title="Manage company profile"><i class="fas fa-user-cog"></i> Admin</button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div ng-if="vm.filteredItems.length > vm.itemsPerPage" class="row">
  <div class="col-sm-12">
      <ul class="pagination pagination-sm justify-content-center mt-5" uib-pagination items-per-page="vm.itemsPerPage" total-items="vm.filteredItems.length" ng-model="vm.currentPage"
      ng-change="vm.paginateItems()"></ul>
  </div>
</div>




